<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playlab42</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="lib/theme.css">
  <link rel="stylesheet" href="lib/parcours-viewer.css">
  <link rel="stylesheet" href="style.css">
  <script type="module">
    // Initialiser le thÃ¨me le plus tÃ´t possible pour Ã©viter le flash
    import { initTheme } from './lib/theme.js';
    initTheme();
  </script>
</head>
<body>
  <header>
    <h1>Playlab42</h1>
    <nav>
      <button class="btn-settings" id="btn-settings" aria-label="ParamÃ¨tres">âš™</button>
    </nav>
  </header>

  <main id="main">
    <!-- Vue Catalogue -->
    <section id="view-catalogue" class="view active">
      <!-- Onglets -->
      <div class="tabs" role="tablist" aria-label="Sections du catalogue">
        <button class="tab active" role="tab" aria-selected="true" aria-controls="panel-parcours" id="tab-parcours" data-tab="parcours">
          ðŸ“š Parcours
        </button>
        <button class="tab" role="tab" aria-selected="false" aria-controls="panel-tools" id="tab-tools" data-tab="tools">
          ðŸ”§ Outils
        </button>
        <button class="tab" role="tab" aria-selected="false" aria-controls="panel-games" id="tab-games" data-tab="games">
          ðŸŽ® Jeux
        </button>
        <button class="tab" role="tab" aria-selected="false" aria-controls="panel-bookmarks" id="tab-bookmarks" data-tab="bookmarks">
          ðŸ”— Liens
        </button>
      </div>

      <div class="search-bar">
        <input type="text" id="search" placeholder="Rechercher..." aria-label="Rechercher">
      </div>

      <div class="filters" id="filters">
        <button class="filter active" data-tag="">Tous</button>
      </div>

      <!-- Panel Parcours -->
      <div id="panel-parcours" class="tab-panel active" role="tabpanel" aria-labelledby="tab-parcours">
        <!-- Filtres par catÃ©gorie -->
        <div class="parcours-category-filters" id="parcours-category-filters"></div>
        <!-- CatÃ©gories dÃ©pliÃ©es (PlayLab42, RÃ©cents, Autres) -->
        <div class="parcours-categories-expanded" id="parcours-categories-expanded"></div>
        <!-- Liste d'Ã©pics (filtrÃ©e par recherche) -->
        <div class="parcours-list" id="parcours-list">
          <div class="epic-cards" id="cards-parcours"></div>
        </div>
        <p class="empty-message" id="empty-parcours">Aucun parcours disponible</p>
      </div>

      <!-- Panel Outils -->
      <div id="panel-tools" class="tab-panel" role="tabpanel" aria-labelledby="tab-tools">
        <div class="cards" id="cards-tools"></div>
        <p class="empty-message" id="empty-tools">Aucun outil disponible</p>
      </div>

      <!-- Panel Jeux -->
      <div id="panel-games" class="tab-panel" role="tabpanel" aria-labelledby="tab-games">
        <div class="cards" id="cards-games"></div>
        <p class="empty-message" id="empty-games">Aucun jeu disponible</p>
      </div>

      <!-- Panel Bookmarks -->
      <div id="panel-bookmarks" class="tab-panel" role="tabpanel" aria-labelledby="tab-bookmarks">
        <div class="bookmark-filters" id="bookmark-filters"></div>
        <div class="bookmark-tree" id="bookmark-tree"></div>
        <p class="empty-message" id="empty-bookmarks">Aucun lien disponible</p>
      </div>
    </section>

    <!-- Vue Jeu/Outil (iframe) -->
    <section id="view-game" class="view">
      <div class="game-header">
        <button class="btn-back" id="btn-back" aria-label="Retour">âœ•</button>
        <span class="game-title" id="game-title"></span>
        <div class="game-controls">
          <button class="btn-fullscreen" id="btn-fullscreen" aria-label="Plein Ã©cran">â›¶</button>
          <button class="btn-sound" id="btn-sound" aria-label="Son">ðŸ”Š</button>
        </div>
      </div>
      <div class="game-container">
        <iframe id="game-iframe" sandbox="allow-scripts allow-same-origin"></iframe>
        <div class="loading" id="loading">
          <div class="spinner"></div>
          <p>Chargement...</p>
        </div>
      </div>
    </section>

    <!-- Vue Parcours Viewer -->
    <section id="view-parcours" class="view"></section>

    <!-- Vue Settings -->
    <section id="view-settings" class="view">
      <div class="settings-header">
        <button class="btn-back" id="btn-close-settings" aria-label="Fermer">âœ•</button>
        <h2>ParamÃ¨tres</h2>
      </div>
      <div class="settings-content">
        <div class="setting">
          <label for="input-pseudo">Pseudo</label>
          <input type="text" id="input-pseudo" placeholder="Anonyme" maxlength="20">
        </div>
        <div class="setting">
          <label>Son</label>
          <div class="toggle-group">
            <button class="toggle active" id="sound-on" data-value="true">ON</button>
            <button class="toggle" id="sound-off" data-value="false">OFF</button>
          </div>
        </div>
        <div class="setting">
          <label>ThÃ¨me</label>
          <div class="toggle-group toggle-group-3">
            <button class="toggle" id="theme-system" data-value="system">Auto</button>
            <button class="toggle" id="theme-dark" data-value="dark">Sombre</button>
            <button class="toggle" id="theme-light" data-value="light">Clair</button>
          </div>
        </div>
        <hr>
        <button class="btn-danger" id="btn-clear-data">ðŸ—‘ Effacer mes donnÃ©es</button>
      </div>
    </section>
  </main>

  <footer>
    <span>Playlab42</span>
    <span class="version">v0.1.0</span>
  </footer>

  <!-- Templates -->
  <template id="card-template">
    <div class="card">
      <div class="card-thumb"></div>
      <div class="card-info">
        <h3></h3>
        <p></p>
        <div class="card-tags"></div>
      </div>
    </div>
  </template>

  <template id="filter-template">
    <button class="filter"></button>
  </template>

  <template id="tag-template">
    <span class="card-tag"></span>
  </template>

  <!-- Templates Parcours -->
  <template id="epic-card-template">
    <article class="epic-card">
      <div class="epic-thumb"></div>
      <div class="epic-info">
        <h3 class="epic-title"></h3>
        <p class="epic-description"></p>
        <div class="epic-meta">
          <span class="epic-duration"></span>
          <span class="epic-slides"></span>
        </div>
        <div class="epic-tags"></div>
        <div class="epic-progress">
          <div class="epic-progress-bar"></div>
        </div>
      </div>
    </article>
  </template>

  <template id="category-section-template">
    <section class="category-section">
      <h2 class="category-section-title"></h2>
      <div class="epic-cards category-epics"></div>
    </section>
  </template>

  <!-- Templates Bookmarks -->
  <template id="bookmark-category-template">
    <div class="bookmark-category">
      <h3 class="bookmark-category-title">
        <span class="bookmark-category-icon"></span>
        <span class="bookmark-category-label"></span>
        <span class="bookmark-category-count"></span>
      </h3>
      <ul class="bookmark-list"></ul>
    </div>
  </template>

  <template id="bookmark-item-template">
    <li class="bookmark-item">
      <a href="#" target="_blank" rel="noopener">
        <span class="bookmark-icon"></span>
        <span class="bookmark-content">
          <span class="bookmark-title"></span>
          <span class="bookmark-description"></span>
        </span>
        <span class="bookmark-domain"></span>
      </a>
    </li>
  </template>

  <!-- Preview Bookmark (singleton) -->
  <div id="bookmark-preview" class="bookmark-preview" role="tooltip" aria-hidden="true">
    <div class="bookmark-preview-image"></div>
    <div class="bookmark-preview-content">
      <h4 class="bookmark-preview-title"></h4>
      <p class="bookmark-preview-description"></p>
      <span class="bookmark-preview-domain"></span>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
